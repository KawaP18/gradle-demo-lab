trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

variables:
  GRADLE_USER_HOME: $(Pipeline.Workspace)/.gradle

steps:
- task: JavaToolInstaller@0
  inputs:
    versionSpec: '17'
    jdkArchitectureOption: 'x64'
    jdkSourceOption: 'PreInstalled'

- script: |
    # Compile Java source
    mkdir -p app/build/classes
    javac -d app/build/classes app/src/main/java/org/example/App.java
    
    # Run the application
    echo "Running application:"
    java -cp app/build/classes org.example.App
    
    # Show project info
    echo "Project Name: gradle-demo"
    echo "Java Version: $(java -version 2>&1 | head -n 1)"
    echo "Build Time: $(date)"
  displayName: 'Build and Run Java Application'